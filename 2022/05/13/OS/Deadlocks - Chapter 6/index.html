<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Deadlocks - Chapter 6 | Childish Chen's Blog</title><meta name="keywords" content="学习笔记,操作系统课程"><meta name="author" content="Childish Chen"><meta name="copyright" content="Childish Chen"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Deadlocks - Chapter 6 Resource Deadlocks occur when processes are granted exclusive access to devices. We refer to these devices generally as resources. 具有排他性（某个时刻仅供一个进程使用）的对象称为Resource。 In short, a r">
<meta property="og:type" content="article">
<meta property="og:title" content="Deadlocks - Chapter 6">
<meta property="og:url" content="https://inblaze.github.io/2022/05/13/OS/Deadlocks%20-%20Chapter%206/index.html">
<meta property="og:site_name" content="Childish Chen&#39;s Blog">
<meta property="og:description" content="Deadlocks - Chapter 6 Resource Deadlocks occur when processes are granted exclusive access to devices. We refer to these devices generally as resources. 具有排他性（某个时刻仅供一个进程使用）的对象称为Resource。 In short, a r">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7">
<meta property="article:published_time" content="2022-05-13T12:22:00.000Z">
<meta property="article:modified_time" content="2022-05-13T12:27:27.423Z">
<meta property="article:author" content="Childish Chen">
<meta property="article:tag" content="学习笔记">
<meta property="article:tag" content="操作系统课程">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://inblaze.github.io/2022/05/13/OS/Deadlocks%20-%20Chapter%206/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Deadlocks - Chapter 6',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-05-13 20:27:27'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.0.0"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://s4.ax1x.com/2022/03/03/bYXlxH.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">18</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">6</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">4</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archive</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Links</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Childish Chen's Blog</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archive</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Links</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Deadlocks - Chapter 6</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-05-13T12:22:00.000Z" title="Created 2022-05-13 20:22:00">2022-05-13</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2022-05-13T12:27:27.423Z" title="Updated 2022-05-13 20:27:27">2022-05-13</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AF%BE%E7%A8%8B%EF%BC%9A%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">课程：操作系统</a></span></div><div class="meta-secondline"></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1>Deadlocks - Chapter 6</h1>
<h2 id="Resource">Resource</h2>
<p>Deadlocks occur when processes are granted exclusive access to devices. We refer to these devices generally as <strong>resources</strong>.</p>
<p>具有<strong>排他性</strong>（某个时刻仅供一个进程使用）的对象称为<strong>Resource</strong>。</p>
<p>In short, a resource is anything that must <strong>be acquired</strong>, <strong>used</strong>, and <strong>released</strong> over the course of time.</p>
<p>The abstract sequence of events required to use a resource is given below.</p>
<ol>
<li class="lvl-3">
<p><strong>Request</strong> the resource</p>
</li>
<li class="lvl-3">
<p><strong>Use</strong> the resource</p>
</li>
<li class="lvl-3">
<p><strong>Release</strong> the resource</p>
</li>
</ol>
<p>If request denied, process may <strong>be blocked</strong> (wait to be awaken) or <strong>fail with error code</strong> (determined by user).</p>
<h3 id="Preemptable-and-Nonpreemptable-Resources">Preemptable and Nonpreemptable Resources</h3>
<p>Resources come in 2 types: preemptable and nonpreemptable resources.</p>
<h4 id="Preemptable-Resource">Preemptable Resource</h4>
<p>Preemptable resources can be taken away with no ill effects, such as memory.</p>
<h4 id="Nonpreemptable-Resource">Nonpreemptable Resource</h4>
<p>Nonpreemptable resource cannot be taken away from its current owner without potentially causing failure, such as blue-ray recorder.</p>
<p><em>Whether a resource is preemptible depends on the context.</em></p>
<p>Deadlocks only involve <strong>nonpreemptable resource</strong>.</p>
<h2 id="Definition">Definition</h2>
<p>A set of processes is deadlocked if each process in the set is waiting for an event that only another process in the set can cause.</p>
<p>如果一个进程集合中的每个进程都在等待只能由该进程集合中的其他进程才能引发的事件，那么，该进程集合就是<strong>死锁</strong>的。</p>
<h3 id="Conditions-for-Resource-Deadlocks">Conditions for Resource Deadlocks</h3>
<ol>
<li class="lvl-3">
<p><strong>Mutual Exclusion Condition</strong>: Each resource is either currently assigned to exactly one process or is available.</p>
</li>
<li class="lvl-3">
<p><strong>Hold-and-wait Condition</strong>: Process currently holding resources that were granted earlier can request new resources.</p>
</li>
<li class="lvl-3">
<p><strong>No-preemption Condition</strong>: Resources previously granted cannot be forcibly taken away from a process. They must be explicitly released by the process holding them.</p>
</li>
<li class="lvl-3">
<p><strong>Circular Wait Condition</strong>: There must be a circular list of two or more processes, each of which is waiting for a resource held by the next member of the chain.</p>
</li>
</ol>
<p>PS: 如发生Deadlock，四个条件缺一不可</p>
<h3 id="Deadlock-Modeling">Deadlock Modeling</h3>
<p><img src="https://s1.ax1x.com/2022/05/04/OEjfrq.png" alt="deadlockModel"></p>
<p><strong>Processes</strong>, shown as <strong>circles</strong>, and <strong>resources</strong>, shown as <strong>squares</strong>.</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>A directed arc from a resource node (square) to a process node (circle) means that the resource has previously been requested by, granted to, and is currently held by that process.</p>
</li>
<li class="lvl-2">
<p>A directed arc from a process to a resource means that the process is currently blocked waiting for that resource.</p>
</li>
<li class="lvl-2">
<p>If this graph contains one or more cycles, a deadlock exists.</p>
</li>
</ul>
<h2 id="Dealing-with-Deadlocks">Dealing with Deadlocks</h2>
<h3 id="Strategies-for-Dealing-with-Deadlocks">Strategies for Dealing with Deadlocks</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>Just ignore the problem altogether</p>
</li>
<li class="lvl-2">
<p>Detection and recovery</p>
</li>
<li class="lvl-2">
<p>Dynamic avoidance - careful resource allocation</p>
</li>
<li class="lvl-2">
<p>Prevention - negating one of the four conditions</p>
</li>
</ul>
<h3 id="The-Ostrich-Algorithm">The Ostrich Algorithm</h3>
<ul class="lvl-0">
<li class="lvl-2">
<p>Pretend there is no problem</p>
</li>
<li class="lvl-2">
<p>Reasonable if:</p>
<ul class="lvl-2">
<li class="lvl-4">deadlocks occur very rarely</li>
<li class="lvl-4">cost of prevention is high</li>
</ul>
</li>
</ul>
<p>Unix and Windows takes this approach. It is a trade off between convenience correctness.</p>
<h3 id="Deadlock-Detection-and-Recovery">Deadlock Detection and Recovery</h3>
<p>系统并不会防范死锁的产生, 而是在死锁发生之后再进行死锁的检测与恢复.</p>
<h4 id="Deadlock-Detection-with-One-Resource-of-Each-Type">Deadlock Detection with One Resource of Each Type</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>在图中<strong>DFS判环</strong>即可</p>
</li>
</ul>
<h4 id="Deadlock-Detection-with-Multiple-Resources-of-Each-Type">Deadlock Detection with Multiple Resources of Each Type</h4>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/OV82rj"><img src="https://s1.ax1x.com/2022/05/04/OV82rj.md.png" alt="OV82rj.md.png"></a></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>E: existing resource vector</p>
</li>
<li class="lvl-2">
<p>A: available resource vector</p>
</li>
<li class="lvl-2">
<p>C: current allocation matrix</p>
</li>
<li class="lvl-2">
<p>R: request matrix</p>
</li>
</ul>
<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -2.819ex" xmlns="http://www.w3.org/2000/svg" width="17.504ex" height="6.354ex" role="img" focusable="false" viewBox="0 -1562.5 7736.6 2808.5"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="munderover"><g data-mml-node="mo"><path data-c="2211" d="M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z"></path></g><g data-mml-node="TeXAtom" transform="translate(148.2,-1087.9) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(345,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(1123,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="TeXAtom" transform="translate(509.9,1150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g></g><g data-mml-node="msub" transform="translate(1610.7,0)"><g data-mml-node="mi"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path></g><g data-mml-node="TeXAtom" transform="translate(748,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(345,0)"><path data-c="1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"></path></g></g></g><g data-mml-node="mo" transform="translate(3166.2,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="msub" transform="translate(4166.4,0)"><g data-mml-node="mi"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></g><g data-mml-node="mi" transform="translate(783,-150) scale(0.707)"><path data-c="1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"></path></g></g><g data-mml-node="mo" transform="translate(5568.5,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="msub" transform="translate(6624.3,0)"><g data-mml-node="mi"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"></path></g><g data-mml-node="mi" transform="translate(771,-150) scale(0.707)"><path data-c="1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"></path></g></g></g></g></svg></mjx-container></p>
<p>The deadlock detection algorithm can now be giv en as follows.</p>
<ol>
<li class="lvl-3">
<p>Look for an unmarked process, P i , for which the ith row of R is less than or equal to A.</p>
</li>
<li class="lvl-3">
<p>If such a process is found, add the ith row of C to A, mark the process, and go back to step 1.</p>
</li>
<li class="lvl-3">
<p>If no such process exists, the algorithm terminates.</p>
</li>
</ol>
<p>When the algorithm finishes, all the unmarked processes, if any, are deadlocked. There’s no deadlock if there’s no unmarked process.</p>
<h4 id="Recovery-from-Deadlock">Recovery from Deadlock</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>Recovery through Preemption</strong></p>
<p>Take a resource away from its current owner and give it to another process. It depends on the nature of the resource.</p>
</li>
<li class="lvl-2">
<p><strong>Recovery through Rollback</strong></p>
<p><strong>checkpoint</strong> a process periodically to save the state of the process. Restart the process if found deadlocked by using the saved state.</p>
</li>
<li class="lvl-2">
<p><strong>Recovery through Killing Processes</strong></p>
<p>Kill a process in the cycle. With a little luck, the other processes will be able to continue. If this does not help, it can be repeated until the cycle is broken.</p>
<p>Where possible, it is best to kill a process that can be rerun from the beginning with no ill effects.</p>
<p>Alternatively, a process not in the cycle can be chosen as the victim in order to release its resources.</p>
</li>
</ul>
<h3 id="Deadlock-Avoidance">Deadlock Avoidance</h3>
<h4 id="Resource-Trajectories">Resource Trajectories</h4>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/O8WC6J"><img src="https://s1.ax1x.com/2022/05/09/O8WC6J.md.png" alt="O8WC6J.md.png"></a></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>横轴表示Process A的运行阶段，纵轴表示Process B的运行阶段</p>
</li>
<li class="lvl-2">
<p>Process A、B占用Printer的重合时间段将会被标上从左下到右上的斜线，Process A、B占用Plotter的重合时间段将会被标上从左上到右下的斜线</p>
</li>
<li class="lvl-2">
<p>虚线表示系统调度Process A、B运行的过程，该过程不可回退，只能向右或者向上</p>
</li>
<li class="lvl-2">
<p>当Process A穿过<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.339ex" xmlns="http://www.w3.org/2000/svg" width="1.983ex" height="1.885ex" role="img" focusable="false" viewBox="0 -683 876.6 833"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D43C" d="M43 1Q26 1 26 10Q26 12 29 24Q34 43 39 45Q42 46 54 46H60Q120 46 136 53Q137 53 138 54Q143 56 149 77T198 273Q210 318 216 344Q286 624 286 626Q284 630 284 631Q274 637 213 637H193Q184 643 189 662Q193 677 195 680T209 683H213Q285 681 359 681Q481 681 487 683H497Q504 676 504 672T501 655T494 639Q491 637 471 637Q440 637 407 634Q393 631 388 623Q381 609 337 432Q326 385 315 341Q245 65 245 59Q245 52 255 50T307 46H339Q345 38 345 37T342 19Q338 6 332 0H316Q279 2 179 2Q143 2 113 2T65 2T43 1Z"></path></g><g data-mml-node="mn" transform="translate(473,-150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></g></svg></mjx-container>线时，它请求获得Printer，同理，当Process B到达t时，它请求Plotter</p>
</li>
</ul>
<h4 id="Safe-and-Unsafe-States">Safe and Unsafe States</h4>
<p>A state is said to be <strong>safe</strong> if there is some scheduling order in which every process can run to completion even if all of them suddenly request their maximum number of resources immediately.</p>
<p><strong>Safe State</strong>:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/O8T95n"><img src="https://s1.ax1x.com/2022/05/09/O8T95n.md.png" alt="O8T95n.md.png"></a></p>
<p><strong>Unsafe State</strong>:</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/O8TEKU"><img src="https://s1.ax1x.com/2022/05/09/O8TEKU.md.png" alt="O8TEKU.md.png"></a></p>
<h4 id="Banker’s-Algorithm">Banker’s Algorithm</h4>
<p>The banker’s algorithm considers each request as it occurs, seeing whether granting it leads to a safe state. If it does, the request is granted; otherwise, it is postponed until later. To see if a state is safe, the banker checks to see if he has enough resources to satisfy some customer. If so, those loans are assumed to be repaid, and the customer now closest to the limit is checked, and so on. If all loans can eventually be repaid, the state is safe and the initial request can be granted.</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/OGpCmn"><img src="https://s1.ax1x.com/2022/05/09/OGpCmn.md.png" alt="OGpCmn.md.png"></a></p>
<p>The algorithm for checking to see if a state is safe can now be stated.</p>
<ol>
<li class="lvl-3">
<p>Look for a row, R, whose unmet resource needs are all smaller than or equal to A. If no such row exists, the system will eventually deadlock since no process can run to completion (assuming processes keep all resources until they exit).</p>
</li>
<li class="lvl-3">
<p>Assume the process of the chosen row requests all the resources it needs (which is guaranteed to be possible) and finishes. Mark that process as terminated and add all of its resources to the A vector.</p>
</li>
<li class="lvl-3">
<p>Repeat steps 1 and 2 until either all processes are marked terminated (in which case the initial state was safe) or no process is left whose resource needs can be met (in which case the system was not safe).</p>
</li>
</ol>
<h3 id="Deadlock-Prevention">Deadlock Prevention</h3>
<h4 id="Attacking-the-Mutual-Exclusion-Condition">Attacking the Mutual-Exclusion Condition</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>By <strong>spooling</strong> printer output, several processes can generate output at the same time. In this model, the only process that actually requests the physical printer is the printer daemon. Since the daemon never requests any other resources, we can eliminate deadlock for the printer.</p>
</li>
</ul>
<p>Nevertheless, there is a germ of an idea here that is frequently applicable. <strong>Avoid assigning a resource unless absolutely necessary</strong>, and try to make sure that <strong>as few processes as possible may actually claim the resource</strong>.</p>
<h4 id="Attacking-the-Hold-and-Wait-Condition">Attacking the Hold-and-Wait Condition</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>Require <strong>all processes to request all their resources before starting execution</strong>. If everything is available, the process will be allocated whatever it needs and can run to completion. If one or more resources are busy, nothing will be allocated and the process will just wait.</p>
</li>
<li class="lvl-2">
<p>Require <strong>a process requesting a resource to first temporarily release all the resources it currently holds. Then it tries to get everything it needs all at once</strong>.</p>
</li>
</ul>
<h4 id="Attacking-the-No-Preemption-Condition">Attacking the No-Preemption Condition</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>Some resources can be virtualized to avoid this situation.</p>
</li>
<li class="lvl-2">
<p>消除了打印机的死锁也可能带来硬盘的死锁.</p>
</li>
<li class="lvl-2">
<p>Not all resources can be virtualized.</p>
</li>
</ul>
<h4 id="Attacking-the-Circular-Wait-Condition">Attacking the Circular Wait Condition</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>每次只允许占据一个资源</p>
</li>
<li class="lvl-2">
<p>对所有资源进行编号, 某进程每次请求的资源不能是比自己占有的资源序号低的资源. 这样资源分配图中肯定不会出现环 (而是一条链).</p>
</li>
<li class="lvl-2">
<p>上一种方式的变种：不允许进程请求比当前所占有资源最低编号低的资源</p>
</li>
</ul>
<h3 id="Other-Issues-Non-key">Other Issues (Non-key)</h3>
<h4 id="Two-Phase-Locking">Two-Phase Locking</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>The first phase:  the process tries to lock all the records it needs, one at a time.</p>
</li>
<li class="lvl-2">
<p>If during the first phase, some record is needed that is already locked, the process just releases all its locks and starts the first phase all over.</p>
</li>
<li class="lvl-2">
<p>If it succeeds, it begins the second phase, performing its updates and releasing the locks.</p>
</li>
</ul>
<h4 id="Communication-Deadlocks">Communication Deadlocks</h4>
<h4 id="Livelock">Livelock</h4>
<h4 id="Starvation">Starvation</h4>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a><a class="post-meta__tags" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AF%BE%E7%A8%8B/">操作系统课程</a></div><div class="post_share"><div class="social-share" data-image="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/05/29/OS/Memory%20Management%20-%20Chapter%203/"><img class="prev-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">Memory Management - Chapter 3</div></div></a></div><div class="next-post pull-right"><a href="/2022/04/30/ComputerArchitecture/%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F%E4%B8%8E%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%20-%20Chapter%204/"><img class="next-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">指令系统与汇编语言</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2022/05/29/OS/Memory%20Management%20-%20Chapter%203/" title="Memory Management - Chapter 3"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-29</div><div class="title">Memory Management - Chapter 3</div></div></a></div><div><a href="/2022/04/16/OS/Process%20and%20Thread%20-%20Chapter%202/" title="Process and Thread - Chapter 2"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-16</div><div class="title">Process and Thread - Chapter 2</div></div></a></div><div><a href="/2022/03/21/ComputerArchitecture/3.3%20%E6%B5%AE%E7%82%B9%E8%BF%90%E7%AE%97/" title="浮点数运算"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-21</div><div class="title">浮点数运算</div></div></a></div><div><a href="/2022/03/21/ComputerArchitecture/%E5%AE%9A%E7%82%B9%E6%95%B0%E7%9A%84%E4%B9%98%E9%99%A4%E6%B3%95%E8%BF%90%E7%AE%97/" title="整数、定点数的乘除法运算"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-21</div><div class="title">整数、定点数的乘除法运算</div></div></a></div><div><a href="/2022/04/30/ComputerArchitecture/%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F%E4%B8%8E%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%20-%20Chapter%204/" title="指令系统与汇编语言"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-30</div><div class="title">指令系统与汇编语言</div></div></a></div><div><a href="/2022/03/03/ComputerArchitecture/%E8%A1%A5%E7%A0%81%E3%80%81%E7%A7%BB%E7%A0%81%E3%80%818421BCD-2022/" title="补码、移码、8421BCD码"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-03</div><div class="title">补码、移码、8421BCD码</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div id="lv-container" data-id="city" data-uid="MTAyMC81NTYzNi8zMjEwMw=="></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://s4.ax1x.com/2022/03/03/bYXlxH.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Childish Chen</div><div class="author-info__description">Every great story begins with a vision.</div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">18</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">6</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">4</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/inblaze"><i class="fab fa-github"></i><span>My Github Account</span></a></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">Deadlocks - Chapter 6</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Resource"><span class="toc-number">1.1.</span> <span class="toc-text">Resource</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Preemptable-and-Nonpreemptable-Resources"><span class="toc-number">1.1.1.</span> <span class="toc-text">Preemptable and Nonpreemptable Resources</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Preemptable-Resource"><span class="toc-number">1.1.1.1.</span> <span class="toc-text">Preemptable Resource</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Nonpreemptable-Resource"><span class="toc-number">1.1.1.2.</span> <span class="toc-text">Nonpreemptable Resource</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Definition"><span class="toc-number">1.2.</span> <span class="toc-text">Definition</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Conditions-for-Resource-Deadlocks"><span class="toc-number">1.2.1.</span> <span class="toc-text">Conditions for Resource Deadlocks</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Deadlock-Modeling"><span class="toc-number">1.2.2.</span> <span class="toc-text">Deadlock Modeling</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Dealing-with-Deadlocks"><span class="toc-number">1.3.</span> <span class="toc-text">Dealing with Deadlocks</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Strategies-for-Dealing-with-Deadlocks"><span class="toc-number">1.3.1.</span> <span class="toc-text">Strategies for Dealing with Deadlocks</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#The-Ostrich-Algorithm"><span class="toc-number">1.3.2.</span> <span class="toc-text">The Ostrich Algorithm</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Deadlock-Detection-and-Recovery"><span class="toc-number">1.3.3.</span> <span class="toc-text">Deadlock Detection and Recovery</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Deadlock-Detection-with-One-Resource-of-Each-Type"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">Deadlock Detection with One Resource of Each Type</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Deadlock-Detection-with-Multiple-Resources-of-Each-Type"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">Deadlock Detection with Multiple Resources of Each Type</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Recovery-from-Deadlock"><span class="toc-number">1.3.3.3.</span> <span class="toc-text">Recovery from Deadlock</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Deadlock-Avoidance"><span class="toc-number">1.3.4.</span> <span class="toc-text">Deadlock Avoidance</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Resource-Trajectories"><span class="toc-number">1.3.4.1.</span> <span class="toc-text">Resource Trajectories</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Safe-and-Unsafe-States"><span class="toc-number">1.3.4.2.</span> <span class="toc-text">Safe and Unsafe States</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Banker%E2%80%99s-Algorithm"><span class="toc-number">1.3.4.3.</span> <span class="toc-text">Banker’s Algorithm</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Deadlock-Prevention"><span class="toc-number">1.3.5.</span> <span class="toc-text">Deadlock Prevention</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Attacking-the-Mutual-Exclusion-Condition"><span class="toc-number">1.3.5.1.</span> <span class="toc-text">Attacking the Mutual-Exclusion Condition</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Attacking-the-Hold-and-Wait-Condition"><span class="toc-number">1.3.5.2.</span> <span class="toc-text">Attacking the Hold-and-Wait Condition</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Attacking-the-No-Preemption-Condition"><span class="toc-number">1.3.5.3.</span> <span class="toc-text">Attacking the No-Preemption Condition</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Attacking-the-Circular-Wait-Condition"><span class="toc-number">1.3.5.4.</span> <span class="toc-text">Attacking the Circular Wait Condition</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Other-Issues-Non-key"><span class="toc-number">1.3.6.</span> <span class="toc-text">Other Issues (Non-key)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Two-Phase-Locking"><span class="toc-number">1.3.6.1.</span> <span class="toc-text">Two-Phase Locking</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Communication-Deadlocks"><span class="toc-number">1.3.6.2.</span> <span class="toc-text">Communication Deadlocks</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Livelock"><span class="toc-number">1.3.6.3.</span> <span class="toc-text">Livelock</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Starvation"><span class="toc-number">1.3.6.4.</span> <span class="toc-text">Starvation</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/06/10/ComputerArchitecture/%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F%20-%20Chapter%207/" title="存储系统 - Chapter 7"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="存储系统 - Chapter 7"/></a><div class="content"><a class="title" href="/2022/06/10/ComputerArchitecture/%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F%20-%20Chapter%207/" title="存储系统 - Chapter 7">存储系统 - Chapter 7</a><time datetime="2022-06-10T15:02:00.000Z" title="Created 2022-06-10 23:02:00">2022-06-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/05/29/OS/Memory%20Management%20-%20Chapter%203/" title="Memory Management - Chapter 3"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Memory Management - Chapter 3"/></a><div class="content"><a class="title" href="/2022/05/29/OS/Memory%20Management%20-%20Chapter%203/" title="Memory Management - Chapter 3">Memory Management - Chapter 3</a><time datetime="2022-05-29T12:22:00.000Z" title="Created 2022-05-29 20:22:00">2022-05-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/05/13/OS/Deadlocks%20-%20Chapter%206/" title="Deadlocks - Chapter 6"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Deadlocks - Chapter 6"/></a><div class="content"><a class="title" href="/2022/05/13/OS/Deadlocks%20-%20Chapter%206/" title="Deadlocks - Chapter 6">Deadlocks - Chapter 6</a><time datetime="2022-05-13T12:22:00.000Z" title="Created 2022-05-13 20:22:00">2022-05-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/04/30/ComputerArchitecture/%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F%E4%B8%8E%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%20-%20Chapter%204/" title="指令系统与汇编语言"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="指令系统与汇编语言"/></a><div class="content"><a class="title" href="/2022/04/30/ComputerArchitecture/%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F%E4%B8%8E%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%20-%20Chapter%204/" title="指令系统与汇编语言">指令系统与汇编语言</a><time datetime="2022-04-30T15:02:00.000Z" title="Created 2022-04-30 23:02:00">2022-04-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/04/16/OS/Process%20and%20Thread%20-%20Chapter%202/" title="Process and Thread - Chapter 2"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Process and Thread - Chapter 2"/></a><div class="content"><a class="title" href="/2022/04/16/OS/Process%20and%20Thread%20-%20Chapter%202/" title="Process and Thread - Chapter 2">Process and Thread - Chapter 2</a><time datetime="2022-04-16T12:22:00.000Z" title="Created 2022-04-16 20:22:00">2022-04-16</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7')"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2022 By Childish Chen</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.2
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container:not\([display]\)').forEach(node => {
            const target = node.parentNode
            if (target.nodeName.toLowerCase() === 'li') {
              target.parentNode.classList.add('has-jax')
            } else {
              target.classList.add('has-jax')
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>function loadLivere () {
  if (typeof LivereTower === 'object') {
    window.LivereTower.init()
  }
  else {
    (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
    })(document, 'script');
  }
}

if ('Livere' === 'Livere' || !false) {
  if (false) btf.loadComment(document.getElementById('lv-container'), loadLivere)
  else loadLivere()
}
else {
  function loadOtherComment () {
    loadLivere()
  }
}</script></div></div></body></html>